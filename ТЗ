ТЗ: Дашборд по волатильности BTC (сессия 11:00–11:00 МСК)
Цель
Сервис должен собирать почасовые котировки BTC, агрегировать их в «контрактные дни» (11:00–11:00 МСК), считать статистику по волатильности и рейнджу, хранить её в БД и отдавать через эндпоинт/скрипт.
Требования к данным
Источник котировок (свечи 1h) разработчик выбирает сам (допускаются платные).
Хранить историю минимум за 1 год, обновлять каждый час.
Формат времени: хранить в UTC, агрегировать по таймзоне Europe/Moscow.
Метрики
Volatility (Vol) = abs(Open – Close) за сессию.
Range (Rng) = High – Low за сессию.
Для каждой дневной сессии:
Open — цена в 11:00 МСК начала окна.
Close — цена на 10:59:59 МСК следующего дня.
High/Low — экстремумы за 24 часа.
Также нужны текущие значения Vol и Range сегодня с 11:00 МСК до текущего момента.
Статистика
Для Vol и Range посчитать:
среднее, медиану, p10, p25, p75, p90
окна: 5, 7, 14, 30 дней
БД
Использовать MySQL/MariaDB.
Таблицы: почасовые свечи, дневные сессии, статистика (структуру разработчик определяет сам).
Обновления должны быть идемпотентными.
Автоматизация
Ежечасный импорт свечей.
В 11:05 МСК закрывать предыдущую сессию, записывать Vol/Range.
После этого пересчитывать статистику за окна.
«Сегодня» обновлять в реальном времени или с интервалом (каждые 5–10 минут).
API / скрипт
Сделать эндпоинт (или CLI-скрипт), который отдаёт:
статистику по окнам (Vol и Range);
текущие значения Vol и Range за сегодня.
Формат и структуру ответа разработчик выбирает сам (JSON/таблица).
Критерии готовности
Данные корректно пишутся и обновляются.
После 11:05 МСК за каждый день есть запись с Vol и Range.
Доступна статистика за 5/7/14/30 дней и значения «сегодня с 11:00».
Есть инструкция по запуску (README, env-переменные, расписание задач).